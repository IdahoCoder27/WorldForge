@using System.Reflection
@using System.ComponentModel.DataAnnotations

@functions {
    string GetDisplayName(Enum value)
    {
        var member = value.GetType().GetMember(value.ToString()).FirstOrDefault();
        var display = member?.GetCustomAttribute<DisplayAttribute>();
        return display?.Name ?? value.ToString();
    }
}
@model WorldForge.Web.Models.Book

@{
    ViewData["Title"] = "Book Details";
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold">📖 @Model.Title</h2>
    <div>
        <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-sm btn-outline-primary me-2">✏️ Edit</a>
        <a asp-action="Index" class="btn btn-sm btn-outline-secondary">← Back to List</a>
    </div>
</div>

<div class="card shadow-sm border-0">
    <div class="card-body">
        <dl class="row">
            <dt class="col-sm-3">Genre</dt>
            <dd class="col-sm-9">@GetDisplayName(Model.Genre)</dd>

            <dt class="col-sm-3">Synopsis</dt>
            <dd class="col-sm-9">
                @(!string.IsNullOrWhiteSpace(Model.Synopsis) ? Model.Synopsis : "<i class='text-muted'>No synopsis provided</i>")
            </dd>

            <dt class="col-sm-3">Part of a Series?</dt>
            <dd class="col-sm-9">
                @if (Model.IsSeries)
                {
                    <span class="badge bg-success">Yes</span>
                }
                else
                {
                    <span class="badge bg-secondary">No</span>
                }
            </dd>

            <dt class="col-sm-3">Status</dt>
            <dd class="col-sm-9">
                <span class="badge bg-@(Model.Status switch {
                    BookStatus.Draft => "secondary",
                    BookStatus.InProgress => "warning",
                    BookStatus.Published => "success",
                    BookStatus.OnHold => "info",
                    BookStatus.Abandoned => "danger",
                    _ => "dark"
                })">
                    @Model.Status
                </span>
            </dd>

            <dt class="col-sm-3">Created On</dt>
            <dd class="col-sm-9">@Model.CreatedAt.ToLocalTime().ToString("MMMM dd, yyyy @ h:mm tt")</dd>
        </dl>
    </div>
</div>
